{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–∞–≥–∞–∑–∏–Ω –±–∞–ª–ª–æ–≤</title>
  <link rel="stylesheet" href="{% static 'css/store.css' %}">
</head>
<body>

<header class="site-header">
  <div class="container header-inner">
    <div class="logo">üîπ –ú–∞–≥–∞–∑–∏–Ω –ë–∞–ª–ª–æ–≤</div>
    <div class="auth-buttons">
      {% if user.is_authenticated %}
        <form action="{% url 'logout' %}" method="post" class="logout-form">
            {% csrf_token %}
            <button type="submit" class="btn outlined">–í—ã–π—Ç–∏</button>
        </form>
        <span class="balance">–ë–∞–ª–∞–Ω—Å: {{ balance }} –±–∞–ª–ª–æ–≤</span>
      {% else %}
        <a href="{% url 'login' %}?next={{ request.path }}" class="btn primary">–í–æ–π—Ç–∏</a>
        <a href="{% url 'auth' %}" class="btn outlined">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
      {% endif %}
    </div>
  </div>
</header>

<section class="hero">
  <div class="container">
    <h1>–ö—É–ø–∏ –±–∞–ª–ª—ã ‚Äî –æ—Ç–∫—Ä–æ–π –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h1>
    <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø–∞–∫–µ—Ç –∏ –ø–æ–ª—É—á–∏—Ç–µ –º–∞–∫—Å–∏–º—É–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤!</p>
  </div>
</section>

<main class="packages-section">
  <div class="container">
    <div class="section-title">
      <h2>–ù–∞—à–∏ –ø–∞–∫–µ—Ç—ã</h2>
      <div class="underline"></div>
    </div>
    <div class="packages-grid">
      {% for package in packages %}
        <div class="package-card">
          {% if package.discount %}
            <div class="badge">‚Äë{{ package.discount }}%</div>
          {% endif %}
          <div class="card-header">
            <h3>{{ package.name }}</h3>
            <div class="points">{{ package.points }}¬†–±–∞–ª–ª–æ–≤</div>
          </div>
          <div class="card-body">
            <p>{{ package.description }}</p>
          </div>
          <div class="card-footer">
            <div class="price-block">
              {% if package.discount %}
                <span class="old-price">{{ package.price }}¬†‚ÇΩ</span>
              {% endif %}
              <span class="new-price">{{ package.sell_price }}¬†‚ÇΩ</span>
            </div>
            <a href="{{ package.get_absolute_url }}" class="btn btn-buy">–ö—É–ø–∏—Ç—å</a>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</main>

<footer class="site-footer">
  <div class="container">
    <p>¬© 2025 –ú–∞–≥–∞–∑–∏–Ω –ë–∞–ª–ª–æ–≤. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
  </div>
</footer>

</body>
{% if messages %}
  <div class="container" style="margin-top:20px;">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ .alert –∏ —Å—Ç–∞–≤–∏–º –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —Å–∫—Ä—ã—Ç–∏–µ
    document.querySelectorAll('.alert').forEach(function(alert){
      // –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å .hidden
      setTimeout(function(){
        alert.classList.add('hidden');
        // –£–¥–∞–ª—è–µ–º –∏–∑ DOM –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è transition (0.5s)
        setTimeout(function(){ alert.remove(); }, 500);
      }, 3000);
    });
  });
</script>
</html>
